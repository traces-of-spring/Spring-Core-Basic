# [3] μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ - μ΄ν•΄2 κ°μ²΄ μ§€ν–¥ μ›λ¦¬ μ μ©

### ν•™μµ λ©ν‘

1. μƒλ΅μ΄ μ”κµ¬μ‚¬ν•­μ— λ€ν•΄ κ°λ°ν•κ³  μ΄λ¥Ό κ°λ°ν•λ” λ°μ— μμ–΄μ„ λ°μƒν•λ” λ¬Έμ μ μ„ μ• μ μλ‹¤.
2. κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬ν•΄λ³Ό μ μλ‹¤.



μ΄μ „μ— κ°λ°ν–λ μ½”λ“κ°€ μ •λ§ κ°μ²΄ μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ μ¤€μν–λ”μ§€ ν™•μΈν•΄λ³΄μ. μ΄λ²μ—λ” μ£Όλ¬Έν• κΈμ•΅μ %λ¥Ό ν• μΈν•΄μ£Όλ” μƒλ΅μ΄ μ •λ¥  ν• μΈ μ •μ±…μ„ μ¶”κ°€ν•λ‹¤.

### ν• μΈ μ •μ±…μ„ μ• ν”λ¦¬μΌ€μ΄μ…μ— μ μ©ν•κΈ°

- ν• μΈ μ •μ±…μ„ μ‹¤μ μ μΌλ΅ μ μ©ν•λ ¤λ©΄, ν΄λΌμ΄μ–ΈνΈμΈ `OrderServiceImpl` μ„ κ³ μ³μ•Ό ν•λ‹¤

```java
public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();
//    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
}
```

#### λ¬Έμ μ  λ°κ²¬

- μ—­ν• κ³Ό κµ¬ν„μ„ μ¶©μ‹¤ν•κ² λ¶„λ¦¬ν–λ”κ°€? -> O
- λ‹¤ν•μ„±λ„ ν™μ©ν•κ³ , μΈν„°νμ΄μ¤μ™€ κµ¬ν„ κ°μ²΄λ¥Ό λ¶„λ¦¬ν–λ”κ°€? -> O
- OCP, DIP μ™€ κ°™μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ¶©μ‹¤ν μ¤€μν–λ”κ°€?
  - κ·Έλ ‡κ² λ³΄μ΄μ§€λ§ μ‚¬μ‹¤μ€ μ•„λ‹λ‹¤

> 1. OCP (Open / Closed Principle) : κ°λ°© - νμ‡„ μ›μΉ™
>
> - μ†ν”„νΈμ›¨μ–΄ μ”μ†λ” ν™•μ¥μ—λ” μ—΄λ ¤ μμΌλ‚ λ³€κ²½μ—λ” λ‹«ν€ μμ–΄μ•Ό ν•λ‹¤
>
> 2. DIP (Dependeny Inversion Principle) : μμ΅΄ κ΄€κ³„ μ—­μ „ μ›μΉ™
>
> - "μ¶”μƒν™”μ— μμ΅΄ν•΄μ•Όμ§€, κµ¬μ²΄ν™”μ— μμ΅΄ν•λ©΄ μ•λλ‹¤."
> - ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ **κµ¬ν„ ν΄λμ¤μ— μμ΅΄ν•μ§€ λ§κ³ , μΈν„°νμ΄μ¤μ— μμ΅΄ν•λΌ**

- DIP : μ£Όλ¬Έ μ„λΉ„μ¤ ν΄λΌμ΄μ–ΈνΈ (`OrderServiceImpl`) μ€ `DiscountPolicy` μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ©΄μ„ DIPλ¥Ό μ§€ν‚¨ κ²ƒ κ°™μ€λ°??
  - μ¶”μƒν™”(μΈν„°νμ΄μ¤) λΏλ§ μ•„λ‹λΌ κµ¬μ²΄ν™”(κµ¬ν„) ν΄λμ¤μ—λ„ μμ΅΄ν•κ³  μλ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤
    - μ¶”μƒν™” μμ΅΄ (μΈν„°νμ΄μ¤ μμ΅΄) : `DiscountPolicy`
    - κµ¬μ²΄ν™” μμ΅΄ (κµ¬ν„ ν΄λμ¤ μμ΅΄) : `FixDiscountPolicy` , `RateDiscountPolicy`
  - DIPλ¥Ό μ„λ°ν•κ³  μλ‹¤

- OCP : λ³€κ²½ν•μ§€ μ•κ³  ν™•μ¥ν•  μ μλ‹¤κ³  ν–λ”λ°???
  - `OrderServiceImpl` μ€ κΈ°λ¥μ„ ν™•μ¥ν•΄μ„ λ³€κ²½ν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ `OrderServiceImpl` μ— μν–¥μ„ μ¤€λ‹¤
  - λ”°λΌμ„ κΈ°λ¥μ„ ν™•μ¥ν•μ—¬ λ³€κ²½ν•λ” μκ°„ OCPλ¥Ό μ„λ°ν•λ‹¤κ³  ν•  μ μλ‹¤

#### κ²°λ΅ 

- ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ `OrderServiceImpl` μ€ `DiscountPolicy` μ μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ κµ¬μ²΄ ν΄λμ¤λ„ ν•¨κ» μμ΅΄ν•λ‹¤ --> DIP μ„λ°
- κ·Έλμ„ κµ¬μ²΄ ν΄λμ¤λ¥Ό λ³€κ²½ν•  λ•, ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Ό ν•λ‹¤



###  κ·Έλ¬λ©΄ μ–΄λ–»κ² ν•΄κ²°ν•΄μ•Ό ν•λ”κ°€?

- DIP μ„λ°
  - μ¶”μƒμ—λ§ μμ΅΄ν•λ„λ΅ (μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅) λ³€κ²½ν•΄μ•Ό ν•λ‹¤

#### μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ„¤κ³„λ¥Ό λ³€κ²½ν•μ

```java
public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();

    private DiscountPolicy discountPolicy; // μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ½”λ“λ¥Ό λ³€κ²½ν•λ‹¤
    
}
```

π¤” κµ¬ν„μ²΄κ°€ μ—†λ”λ° μ–΄λ–»κ² μ½”λ“λ¥Ό μ‹¤ν–‰ν•  μ μμ„κΉ??

- μ‹¤μ  μ‹¤ν–‰μ„ ν•΄λ³΄λ©΄ `NullPointerException` μ΄ λ°μƒν•λ‹¤

π§ **ν•΄κ²°λ°©μ•**

- λ„κµ°κ°€κ°€ ν΄λΌμ΄μ–ΈνΈμΈ `OrderServiceImpl` μ— `DiscountPolicy` μ κµ¬ν„ κ°μ²΄λ¥Ό λ€μ‹  μƒμ„±ν•κ³  μ£Όμ…ν•΄μ£Όμ–΄μ•Ό ν•λ‹¤

