# [3] ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ì´í•´2 ê°ì²´ ì§€í–¥ ì›ë¦¬ ì ìš©

### í•™ìŠµ ëª©í‘œ

1. ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­ì— ëŒ€í•´ ê°œë°œí•˜ê³  ì´ë¥¼ ê°œë°œí•˜ëŠ” ë°ì— ìˆì–´ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œì ì„ ì•Œ ìˆ˜ ìˆë‹¤.
2. ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•´ë³¼ ìˆ˜ ìˆë‹¤.



ì´ì „ì— ê°œë°œí–ˆë˜ ì½”ë“œê°€ ì •ë§ ê°ì²´ ì§€í–¥ ì„¤ê³„ ì›ì¹™ì„ ì˜ ì¤€ìˆ˜í–ˆëŠ”ì§€ í™•ì¸í•´ë³´ì. ì´ë²ˆì—ëŠ” ì£¼ë¬¸í•œ ê¸ˆì•¡ì˜ %ë¥¼ í• ì¸í•´ì£¼ëŠ” ìƒˆë¡œìš´ ì •ë¥  í• ì¸ ì •ì±…ì„ ì¶”ê°€í•œë‹¤.

## 1. í• ì¸ ì •ì±…ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©í•˜ê¸°

- í• ì¸ ì •ì±…ì„ ì‹¤ì œì ìœ¼ë¡œ ì ìš©í•˜ë ¤ë©´, í´ë¼ì´ì–¸íŠ¸ì¸ `OrderServiceImpl` ì„ ê³ ì³ì•¼ í•œë‹¤

```java
public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();
//    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
}
```



## 2. ë¬¸ì œì  ë°œê²¬

- ì—­í• ê³¼ êµ¬í˜„ì„ ì¶©ì‹¤í•˜ê²Œ ë¶„ë¦¬í–ˆëŠ”ê°€? -> O
- ë‹¤í˜•ì„±ë„ í™œìš©í•˜ê³ , ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ ê°ì²´ë¥¼ ë¶„ë¦¬í–ˆëŠ”ê°€? -> O
- OCP, DIP ì™€ ê°™ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ ì›ì¹™ì„ ì¶©ì‹¤íˆ ì¤€ìˆ˜í–ˆëŠ”ê°€?
  - ê·¸ë ‡ê²Œ ë³´ì´ì§€ë§Œ ì‚¬ì‹¤ì€ ì•„ë‹ˆë‹¤

> 1. OCP (Open / Closed Principle) : ê°œë°© - íì‡„ ì›ì¹™
>
> - ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤
>
> 2. DIP (Dependeny Inversion Principle) : ì˜ì¡´ ê´€ê³„ ì—­ì „ ì›ì¹™
>
> - "ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤."
> - í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ **êµ¬í˜„ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ì§€ ë§ê³ , ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë¼**

- DIP : ì£¼ë¬¸ ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸ (`OrderServiceImpl`) ì€ `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë©´ì„œ DIPë¥¼ ì§€í‚¨ ê²ƒ ê°™ì€ë°??
  - ì¶”ìƒí™”(ì¸í„°í˜ì´ìŠ¤) ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬ì²´í™”(êµ¬í˜„) í´ë˜ìŠ¤ì—ë„ ì˜ì¡´í•˜ê³  ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤
    - ì¶”ìƒí™” ì˜ì¡´ (ì¸í„°í˜ì´ìŠ¤ ì˜ì¡´) : `DiscountPolicy`
    - êµ¬ì²´í™” ì˜ì¡´ (êµ¬í˜„ í´ë˜ìŠ¤ ì˜ì¡´) : `FixDiscountPolicy` , `RateDiscountPolicy`
  - DIPë¥¼ ìœ„ë°˜í•˜ê³  ìˆë‹¤

- OCP : ë³€ê²½í•˜ì§€ ì•Šê³  í™•ì¥í•  ìˆ˜ ìˆë‹¤ê³  í–ˆëŠ”ë°???
  - `OrderServiceImpl` ì€ ê¸°ëŠ¥ì„ í™•ì¥í•´ì„œ ë³€ê²½í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ `OrderServiceImpl` ì— ì˜í–¥ì„ ì¤€ë‹¤
  - ë”°ë¼ì„œ ê¸°ëŠ¥ì„ í™•ì¥í•˜ì—¬ ë³€ê²½í•˜ëŠ” ìˆœê°„ OCPë¥¼ ìœ„ë°˜í•œë‹¤ê³  í•  ìˆ˜ ìˆë‹¤

#### ê²°ë¡ 

- í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ `OrderServiceImpl` ì€ `DiscountPolicy` ì˜ ì¸í„°í˜ì´ìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬ì²´ í´ë˜ìŠ¤ë„ í•¨ê»˜ ì˜ì¡´í•œë‹¤ --> DIP ìœ„ë°˜
- ê·¸ë˜ì„œ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•  ë•Œ, í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë„ í•¨ê»˜ ë³€ê²½í•´ì•¼ í•œë‹¤



###  ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í•´ê²°í•´ì•¼ í•˜ëŠ”ê°€?

- DIP ìœ„ë°˜
  - ì¶”ìƒì—ë§Œ ì˜ì¡´í•˜ë„ë¡ (ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡) ë³€ê²½í•´ì•¼ í•œë‹¤

#### ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì„¤ê³„ë¥¼ ë³€ê²½í•˜ì

```java
public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();

    private DiscountPolicy discountPolicy; // ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì½”ë“œë¥¼ ë³€ê²½í•œë‹¤
    
}
```

ğŸ¤” êµ¬í˜„ì²´ê°€ ì—†ëŠ”ë° ì–´ë–»ê²Œ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆì„ê¹Œ??

- ì‹¤ì œ ì‹¤í–‰ì„ í•´ë³´ë©´ `NullPointerException` ì´ ë°œìƒí•œë‹¤

ğŸ§ **í•´ê²°ë°©ì•ˆ**

- ëˆ„êµ°ê°€ê°€ í´ë¼ì´ì–¸íŠ¸ì¸ `OrderServiceImpl` ì— `DiscountPolicy` ì˜ êµ¬í˜„ ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…í•´ì£¼ì–´ì•¼ í•œë‹¤



## 3. ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬

- ê³µì—° ê¸°íšìë¥¼ ë§Œë“¤ê³ , ë°°ìš°ì™€ ê³µì—° ê¸°íšìì˜ ì±…ì„ì„ í™•ì‹¤íˆ ë¶„ë¦¬í•˜ì



### AppConfigì˜ ë“±ì¥

- ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±(config)í•˜ê¸° ìœ„í•´, **êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**í•˜ê³ , ì—°ê²°í•˜ëŠ” **ì±…ì„**ì„ ê°€ì§€ëŠ” ë³„ë„ì˜ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì

- `AppConfig.java`

  ```java
  public class AppConfig {
  		public MemberService memberService() {
  				return new MemberServiceImpl(new MemoryMemberRepository());
  		}
  }
  ```

- `MemberServiceImpl`

  ```java
  public class MemberServiceImpl implements MemberService {
  
      private final MemberRepository memberRepository;
  
      // ìƒì„±ìë¥¼ í†µí•´ memberRepositoryì˜ êµ¬í˜„ì²´ë¥¼ ì§€ì •í•œë‹¤
      public MemberServiceImpl(MemberRepository memberRepository) {
          this.memberRepository = memberRepository;
      } 
  }
  ```

  - ì´ì œ ìƒì„±ìë¥¼ í†µí•´ `memberRepository` ì˜ êµ¬í˜„ì²´ë¥¼ ì§€ì •í•˜ë¯€ë¡œ, `MemberServiceImpl` ì€ êµ¬ì²´í™”ë¥¼ ì „í˜€ ëª¨ë¥¸ë‹¤
    - ìƒì„±ìë¥¼ í†µí•´ ê°ì²´ê°€ ë“¤ì–´ê°„ë‹¤ => ìƒì„±ì ì£¼ì…

- ë™ì¼í•˜ê²Œ `OrderServiceImpl` ë„ ë°”ê¾¸ë©´,

- `AppConfig.java`

  ```java
  public class AppConfig {
      public MemberService memberService() {
          return new MemberServiceImpl(new MemoryMemberRepository());
      }
  
      public OrderService orderService() {
          return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());
      }
  }
  ```

- `OrderServiceImpl`

  ```java
  public class OrderServiceImpl implements OrderService {
  
      private final MemberRepository memberRepository;
      private final DiscountPolicy discountPolicy;
  
      public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
          this.memberRepository = memberRepository;
          this.discountPolicy = discountPolicy;
      }
  }
  
  ```

##### ì² ì €í•˜ê²Œ DIPê°€ ì§€ì¼œì§€ê³  ìˆë‹¤

- `AppConfig` ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ **êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**í•œë‹¤
  1. `MemberServiceImpl`
  2. `MemoryMemberRepository`
  3. `OrderServiceImpl`
  4. `FixDiscountPolicy`
- `AppConfig` ëŠ” ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°(ë ˆí¼ëŸ°ìŠ¤)ë¥¼ **ìƒì„±ìë¥¼ í†µí•´ì„œ ì£¼ì…(ì—°ê²°)** í•´ì¤€ë‹¤
  - `MemberServiceImpl` -> `MemoryMemberRepository`
  - `OrderServiceImpl` -> `MemoryMemberRepository`, `FixDiscountPolicy`

â­ï¸ ì´ì œ ì„¤ê³„ ë³€ê²½ìœ¼ë¡œ `MemberServiceImpl` ì€ `MemoryMemberRepository` ë¥¼ ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤

- ë‹¨ì§€ `MemberRepository` ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´í•œë‹¤
- `MemberServiceImpl` ì…ì¥ì—ì„œ ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ë“¤ì–´ì˜¬ì§€ (ì£¼ì…ë ì§€)ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤
- `MemberServiceImpl` ì˜ ìƒì„±ìë¥¼ í†µí•´ì„œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë¥¼ ì£¼ì…í• ì§€ëŠ” ì˜¤ì§ ì™¸ë¶€ `AppConfig` ì—ì„œ ê²°ì •ëœë‹¤
- `MemberServiceImpl` ì€ ì´ì œë¶€í„° **ì˜ì¡´ ê´€ê³„ì— ëŒ€í•œ ê³ ë¯¼ì€ ì™¸ë¶€**ì— ë§¡ê¸°ê³  ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘í•˜ë©´ ëœë‹¤



â­ï¸ ê°ì²´ì˜ ìƒì„±ê³¼ ì—°ê²°ì€ `AppConfig`ê°€ ë‹´ë‹¹í•œë‹¤

- DIP ì™„ì„± : `MemberServiceImpl` ì€ `MemberRepository` ì¸ ì¶”ìƒì—ë§Œ ì˜ì¡´í•˜ë©´ ëœë‹¤. ì´ì œ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ëª°ë¼ë„ ëœë‹¤
- **ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬** : ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì—­í• ê³¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì´ ëª…í™•íˆ ë¶„ë¦¬ë˜ì—ˆë‹¤
- `appConfig` ê°ì²´ëŠ” `memoryMemberRepository` ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ê°’ì„ `memberServiceImpl` ì„ ìƒì„±í•˜ë©´ì„œ ìƒì„±ìë¡œ ì „ë‹¬í•œë‹¤

â­ï¸ í´ë¼ì´ì–¸íŠ¸ì¸ `memberServiceImpl` ì…ì¥ì—ì„œ ë³´ë©´ ì˜ì¡´ê´€ê³„ë¥¼ ë§ˆì¹˜ ì™¸ë¶€ì—ì„œ ì£¼ì…í•´ì£¼ëŠ” ê²ƒ ê°™ë‹¤ê³  í•´ì„œ **DI (Dependency Injection)** ë˜ëŠ” ì˜ì¡´ ê´€ê³„ ì£¼ì…(ì˜ì¡´ì„± ì£¼ì…)ì´ë¼ê³  í•œë‹¤.



### ì •ë¦¬

- `AppConfig` ë¥¼ í†µí•´ì„œ ê´€ì‹¬ì‚¬ë¥¼ í™•ì‹¤í•˜ê²Œ ë¶„ë¦¬í–ˆë‹¤
- ë°°ì—­, ë°°ìš°ë¥¼ ìƒê°í•´ë³´ì
- `AppConfig` ëŠ” ê³µì—° ê¸°íšìì´ë‹¤
- `AppConfig` ëŠ” êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì„ íƒí•œë‹¤. ë°°ì—­ì— ë§ëŠ” ë‹´ë‹¹ ë°°ìš°ë¥¼ ì„ íƒí•œë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–»ê²Œ ë™ì‘í•´ì•¼ í•˜ì§€ ì „ì²´ êµ¬ì„±ì„ ì±…ì„ì§„ë‹¤
- ì´ì œ ê° ë°°ìš°ë“¤ì€ ë‹´ë‹¹ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ì§€ë©´ ëœë‹¤
- `OrderServiceImpl` ì€ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ì§€ë©´ ëœë‹¤



## 4. AppConfig ë¦¬íŒ©í„°ë§

- ì§€ê¸ˆì˜ `AppConfig` ëŠ” ì¤‘ë³µì´ ìˆê³ , ì—­í• ì— ë”°ë¥¸ êµ¬í˜„ì´ ì˜ ì•ˆë³´ì¸ë‹¤

### ì¤‘ë³µì„ ì œê±°í•˜ê³ , ì—­í• ì— ë”°ë¥¸ êµ¬í˜„ì´ ë³´ì´ë„ë¡ ë¦¬íŒ©í„°ë§ í•˜ì

```java
public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    private MemoryMemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    public DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }
}
```

#### ì¥ì 

- ë©”ì†Œë“œëª…ë§Œ ë³´ëŠ” ìˆœê°„ ì—­í• ì´ ì˜ ë“œëŸ¬ë‚œë‹¤ (`AppConfig` ë¥¼ ë³´ë©´ ì—­í• ê³¼ êµ¬í˜„ í´ë˜ìŠ¤ê°€ í•œ ëˆˆì— ë“¤ì–´ì™€ì„œ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±ì„ í•œ ëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆë‹¤)
- ì¤‘ë³µì´ ì œê±° ë˜ì—ˆìœ¼ë¯€ë¡œ (`new MemoryMemberRepository()`), ì´ì œ `MemoryMemberRepository` ë¥¼ ë‹¤ë¥¸ êµ¬í˜„ì²´ë¡œ ë³€ê²½í•  ë•Œ í•œ ë¶€ë¶„ë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤



## 5. ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©

  `AppConfig` ì˜ ë“±ì¥ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚¬ìš© ì˜ì—­ê³¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , êµ¬ì„±í•˜ëŠ” (Configuration) í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ ë¶„ë¦¬ë˜ì—ˆë‹¤

- í• ì¸ ì •ì±…ì„ `RateDiscountPolicy` ë¡œ ë³€ê²½í•´ë„ êµ¬ì„± ì˜ì—­ë§Œ ì˜í–¥ì„ ë°›ê³ , ì‚¬ìš© ì˜ì—­ì€ ì „í˜€ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤



## 6. ì •ë¦¬

### ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ

- ë‹¤í˜•ì„± ë•ë¶„ì— ìƒˆë¡œìš´ ì •ë¥  í• ì¸ ì •ì±… ì½”ë“œë¥¼ ì¶”ê°€ë¡œ ê°œë°œí•˜ëŠ” ê²ƒ ìì²´ëŠ” ë¬¸ì œê°€ ì—†ì—ˆë‹¤

### ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì 

- ìƒˆë¡œ ê°œë°œí•œ ì •ë¥  í• ì¸ ì •ì±…ì„ ì‹¤ì œë¡œ ì ìš©í•˜ê³ ì í•˜ë‹ˆ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ `OrderServiceImpl` , ì¦‰ ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ë„ í•¨ê»˜ ë³€ê²½í•´ì•¼ í•¨
  - ì£¼ë¬¸ ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸ (`OrderServiceImpl`) ê°€ ì¶”ìƒí™”(ì¸í„°í˜ì´ìŠ¤)ì¸ `DiscountPolicy` ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬ì²´ í´ë˜ìŠ¤ì¸  `FixDiscountPolicy` ê¹Œì§€ë„ í•¨ê»˜ ì˜ì¡´í–ˆê¸° ë•Œë¬¸
    - ì¦‰, **DIP ìœ„ë°˜**

### ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬

- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ ê³µì—°ìœ¼ë¡œ ìƒê°í•´ë³´ì
  - ê¸°ì¡´ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì˜ì¡´í•˜ëŠ” ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±í•˜ê³ , ì‹¤í–‰í•¨
  - ì¦‰, ê¸°ì¡´ì—ëŠ” ë°°ìš°ê°€ ê³µì—°ë„í•˜ê³ , ë™ì‹œì— ë‹¤ë¥¸ ì£¼ì¸ê³µë„ ì§ì ‘ ì„­ì™¸í•´ì•¼ í•˜ëŠ” ë‹¤ì–‘í•œ ì±…ì„ì„ ê°€ì§€ê³  ìˆì—ˆë˜ ê²©
- ê³µì—°ì„ êµ¬ì„±í•˜ê³ , ë‹´ë‹¹ ë°°ìš°ë¥¼ ì„­ì™¸í•˜ê³  ì§€ì •í•˜ëŠ” ì±…ì„ì„ ë‹´ë‹¹í•˜ëŠ” ë³„ë„ì˜ ê³µì—° ê¸°íšìê°€ ë‚˜ì™€ì•¼ í•¨
  - `AppConfig` ì˜ ë“±ì¥
- `AppConfig` ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±í•˜ê¸° ìœ„í•´, êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì±…ì„ì„ ê°€ì§„ë‹¤
- ì´ì œ í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ìì‹ ì˜ ì—­í• ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì—ë§Œ ì§‘ì¤‘í•˜ê³ , ê¶Œí•œì´ ì¤„ì–´ë“ ë‹¤ (ì±…ì„ì´ ëª…í™•í•´ì§„ë‹¤)

### AppConfig ë¦¬íŒ©í„°ë§

- êµ¬ì„± ì •ë³´ì—ì„œ ì—­í• ê³¼ êµ¬í˜„ì„ ëª…í™•í•˜ê²Œ ë¶„ë¦¬
- ì¤‘ë³µì„ ì œê±°í•˜ì—¬ ì—­í• ì„ ì˜ ë“œëŸ¬ë‚¸ë‹¤

### ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©

- `AppConfig` ì˜ ë“±ì¥ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í¬ê²Œ ì‚¬ìš© ì˜ì—­ê³¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  êµ¬ì„±í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ ë¶„ë¦¬ë¨
- ë”°ë¼ì„œ, ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ì ìš©í•˜ë”ë¼ë„ êµ¬ì„± ì˜ì—­ë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤ (ì‚¬ìš© ì˜ì—­ ë° í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë„ ë³€ê²½í•  í•„ìš”ê°€ ì—†ë‹¤)



## 7. ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ ì ìš©

- ì—¬ê¸°ì„œëŠ” 3ê°€ì§€ SRP, DIP, OCP ì ìš©

### 1. SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™

> SRP (Single Responsibility Principle)
>
> -  í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤
> -  í•˜ë‚˜ì˜ ì±…ì„ì´ë¼ëŠ” ê²ƒì€ ëª¨í˜¸í•˜ë‹¤
>    - í´ ìˆ˜ ìˆê³ , ì‘ì„ ìˆ˜ë„ ìˆë‹¤
>    - ë¬¸ë§¥ê³¼ ìƒí™©ì— ë”°ë¼ ë‹¤ë¥´ë‹¤
> -  ê·¸ëŸ¬ë©´ ì–´ë–¤ ê²ƒì„ ë³´ê³  ì„¤ê³„ê°€ ì˜ ë˜ì—ˆë‹¤ê³  í•˜ëŠ”ê°€?
> -  â­ï¸ ì¤‘ìš”í•œ ê¸°ì¤€ì€ **ë³€ê²½**ì´ë‹¤. ë³€ê²½ì´ ìˆì„ ë•Œ íŒŒê¸‰ íš¨ê³¼ê°€ ì ìœ¼ë©´ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ì˜ ë”°ë¥¸ ê²ƒì´ë‹¤
>    - ex) UI ë³€ê²½, ê°ì²´ì˜ ìƒì„±ê³¼ ì‚¬ìš©ì„ ë¶„ë¦¬

- ë§¨ ì²˜ìŒ í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì§ì ‘ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³ , ì‹¤í–‰í•˜ëŠ” ë‹¤ì–‘í•œ ì±…ì„ì„ ê°€ì§€ê³  ìˆë‹¤ê°€
- SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ë”°ë¥´ë©´ì„œ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•¨
  - êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì±…ì„ì€ `AppConfig` ê°€ ë‹´ë‹¹í•˜ê²Œ ë¨
  - í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ë‹´ë‹¹í•˜ê²Œ ë¨

###  2. DIP ì˜ì¡´ ê´€ê³„ ì—­ì „ ì›ì¹™

> DIP (Denpendency Injection Principle)
>
> - í”„ë¡œê·¸ë˜ë¨¸ëŠ” **"ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤."** ì˜ì¡´ì„± ì£¼ì…ì€ ì´ ì›ì¹™ì„ ë”°ë¥´ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤
> - í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ **êµ¬í˜„ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ì§€ ë§ê³ , ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë¼**ëŠ” ëœ»ì´ë‹¤ (êµ¬í˜„ í´ë˜ìŠ¤ë§Œ ë°”ë¼ë³´ì§€ ë§ê³ , ì¸í„°í˜ì´ìŠ¤ë§Œ ë°”ë¼ë´ë¼)

- ë§¨ ì²˜ìŒ, ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ê°œë°œí•˜ê³ , ì ìš©í•˜ë ¤ê³  í•˜ë‹ˆ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë„ í•¨ê»˜ ë³€ê²½í•´ì•¼í–ˆë‹¤
  - í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ `OrderServiceImpl` ì€ DIPë¥¼ ì§€í‚¤ë©° `DiscountPolicy` ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ëŠ” ê²ƒ ê°™ì•˜ì§€ë§Œ, ì‚¬ì‹¤ì€ `FixDiscountPolicy` êµ¬ì²´í™” êµ¬í˜„ í´ë˜ìŠ¤ì—ë„ í•¨ê»˜ ì˜ì¡´í–ˆê¸° ë•Œë¬¸ì´ë‹¤
- ê·¸ë˜ì„œ! í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ `DiscountPolicy` ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì½”ë“œë¥¼ ë³€ê²½í–ˆë‹¤
  - í•˜ì§€ë§Œ, í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì¸í„°í˜ì´ìŠ¤ë§Œìœ¼ë¡œëŠ” ì•„ë¬´ê²ƒë„ ì‹¤í–‰ í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, 
  - `AppConfig` ê°€ `FixDiscountPolicy` ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ëŒ€ì‹  ìƒì„±í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í–ˆë‹¤. 
- ì´ë ‡ê²Œí•´ì„œ DIP ì›ì¹™ì„ ë”°ë¥´ë©´ì„œ ë¬¸ì œë„ í•´ê²°í–ˆë‹¤.



### 3. OCP ê°œë°© íì‡„ ì›ì¹™

> OCP (Open Closed Principle)
>
> - ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤

- ë‹¤í˜•ì„± ì‚¬ìš©í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ê°€ DIPë¥¼ ì§€í‚¤ë„ë¡ í•˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš© ì˜ì—­ê³¼ êµ¬ì„± ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ„ì—ˆë‹¤
- `AppConfig` ê°€ ì˜ì¡´ê´€ê³„ë¥¼ `FixDiscountPolicy` ì—ì„œ `RateDiscountPolicy ` ë¡œ ë³€ê²½í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì£¼ì…í•˜ë¯€ë¡œ, ì´ì œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ëœë‹¤
- **ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†Œë¥¼ ìƒˆë¡­ê²Œ í™•ì¥í•´ë„ ì‚¬ìš© ì˜ì—­ì˜ ë³€ê²½ì€ ë‹«í˜€ ìˆê²Œ ëœë‹¤.**



## 8. IoC, DI, ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ

- ê¸°ì¡´ í”„ë¡œê·¸ë¨
  - í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ ê°ì²´ê°€ ìŠ¤ìŠ¤ë¡œ í•„ìš”í•œ ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³ , ì‹¤í–‰í•¨
- `AppConfig` ì˜ ë“±ì¥ ì´í›„
  - êµ¬í˜„ ê°ì²´ëŠ” ìì‹ ì˜ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹
  - í”„ë¡œê·¸ë¨ ì œì–´ íë¦„ì€ ì´ì œ `AppConfig` ê°€ ë‹´ë‹¹
  - `OrderServiceImpl` ë„ `AppConfig` ê°€ ìƒì„±í•˜ê²Œ ë¨

#### í”„ë¡œê·¸ë¨ ì œì–´ íë¦„ì„ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒ : IoC (ì œì–´ì˜ ì—­ì „)



### DI (Dependency Injection)

- `OrderServiceImpl` ì€ `DiscountPolicy` ì— ì˜ì¡´

#### ì˜ì¡´ ê´€ê³„ëŠ” ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„ì™€, ì‹¤í–‰ ì‹œì ì— ê²°ì •ë˜ëŠ” ë™ì ì¸ ê°ì²´ (ì¸ìŠ¤í„´ìŠ¤) ì˜ì¡´ ê´€ê³„ ë‘˜ì„ ë¶„ë¦¬í•´ì„œ ìƒê°í•´ì•¼ í•¨



#### ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„

- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ë¶„ì„ ê°€ëŠ¥
- ì‹¤ì œ ì–´ë–¤ ê°ì²´ê°€ `OrderServiceImpl` ì— ì£¼ì…ë  ì§€ ì•Œ ìˆ˜ ì—†ìŒ



#### ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ ê´€ê³„

- ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ì‹¤ì œ ìƒì„±ëœ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ê°€ ì°¸ì¡°ê°€ ì—°ê²°ëœ ì˜ì¡´ ê´€ê³„



#### ì˜ì¡´ ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ ê´€ê³„ë¥¼ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ 



### IoC ì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ

- AppConfig ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ ê´€ê³„ë¥¼ ì—°ê²°í•´ ì£¼ëŠ” ê²ƒ
- ì–´ì…ˆë¸”ëŸ¬, ì˜¤ë¸Œì íŠ¸ íŒ©í† ë¦¬ ë“±ìœ¼ë¡œ ë¶ˆë¦¬ê¸°ë„ í•œë‹¤



## 9. ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜í•˜ê¸°

#### AppConfig ìŠ¤í”„ë§ ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½

```java
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    private MemoryMemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    @Bean
    public DiscountPolicy discountPolicy() {
//        return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }
}
```

- `AppConfig` ì— ì„¤ì •ì„ êµ¬ì„±í•œë‹¤ëŠ” ëœ»ì˜ `@Configuration` ì„ ë¶™ì—¬ì¤Œ
- ê° ë©”ì„œë“œì— `@Bean` ì„ ë¶™ì—¬ì¤Œ
  - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•¨



### MemberAppì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì ìš©

```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class MemberApp {
    public static void main(String[] args) {
//        AppConfig appConfig = new AppConfig();
//        MemberService memberService = appConfig.memberService();

        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);

        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new Member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```



### OrderAppì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì ìš©

```java
package hello.core.order;

import hello.core.AppConfig;
import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class OrderApp {
    public static void main(String[] args) {
//        AppConfig appConfig = new AppConfig();
//        MemberService memberService = appConfig.memberService();
//        OrderService orderService = appConfig.orderService();

        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);
        OrderService orderService = applicationContext.getBean("orderService", OrderService.class);

        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 20000);
        System.out.println("order = " + order);
        System.out.println("order.calculatePrice = " + order.calculatePrice());
    }
}
```

### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ

- `ApplicationContext` ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ê³  í•œë‹¤
- ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ `AppConfig` ë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  DIë¥¼ í–ˆì§€ë§Œ, ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ ì‚¬ìš©í•¨
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” `@Configuration` ì´ ë¶™ì€ `AppConfig` ë¥¼ ì„¤ì • (êµ¬ì„±) ì •ë³´ë¡œ ì‚¬ìš©í•¨



### ì¶œì²˜

[ì¸í”„ëŸ°  - ê¹€ì˜í•œë‹˜ì˜ ìŠ¤í”„ë§ í•µì‹¬ì›ë¦¬ - ê¸°ë³¸í¸]: https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8#	"ê¹€ì˜í•œë‹˜ì˜ ìŠ¤í”„ë§ í•µì‹¬ì›ë¦¬ - ê¸°ë³¸í¸"